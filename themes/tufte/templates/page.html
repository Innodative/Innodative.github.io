{% extends "base.html" %}

{% block title %}{{ page.title }} | {{ SITENAME }}{% endblock %}

{% block content %}
<article>
    <h1>{{ page.title }}</h1>
    
    <section>
        {{ page.content }}
    </section>
    
    {% if page.category_filter %}
    <hr>
    <section class="recent-posts">
        <h2>Recent {{ page.category_filter }} Posts</h2>
        
        {% set category_articles = articles|selectattr('category.name', 'equalto', page.category_filter)|selectattr('status', 'ne', 'hidden')|list %}
        {% for article in category_articles[:5] %}
        <article class="post-preview">
            <h3><a href="{{ SITEURL }}/{{ article.url }}">{{ article.title }}</a></h3>
            <p class="post-meta">{{ article.locale_date }}</p>
            {% if article.summary %}
            <p>{{ article.summary }}</p>
            {% endif %}
        </article>
        {% endfor %}
    </section>
    {% endif %}
</article>
{% endblock %}
